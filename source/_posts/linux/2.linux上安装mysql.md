---
title: linux上安装mysql
myPath: install-mysql-linux
categories:
- linux
tags: mysql
date:
cover: ../images/linux/21/4/23/linux_mysql.png
---

### 安装步骤

#### mysql下载
先验证是否安装了mysql 若无输出则证明未安装过！执行命令:
`rpm -qa | grep mysql`
![](https://s2.ax1x.com/2020/02/05/1skpTJ.png)
先下载mysql的repo源，这玩意儿又叫mysql源，字面上理解就是mysql的源码,执行命令：
`wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm`
![](https://s2.ax1x.com/2020/02/05/1sFvOU.png)

安装mysql-community-release-el7-5.noarch.rpm包,执行命令：
`sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm`
![](https://s2.ax1x.com/2020/02/05/1sFzmF.png)


安装mysql，执行命令：
`sudo yum install mysql-server`
![](https://s2.ax1x.com/2020/02/05/1skPYR.png)

可以看到130多M还是挺大的
输入y确认，开始下载！好不容易到100%，还得下载依赖，继续y确认下载
![](https://s2.ax1x.com/2020/02/05/1skif1.png)
可算ojbk了，继续！

#### 重置密码
登录然后重置密码,执行：
`mysql -u root`
![](https://s2.ax1x.com/2020/02/05/1skAl6.png)

原因是/var/lib/mysql的访问权限问题。下面的命令把/var/lib/mysql的拥有者改为当前用户
执行命令赋权，重启mysql：
`sudo chown -R openscanner:openscanner /var/lib/mysql`
`service mysqld restart`
![](https://s2.ax1x.com/2020/02/05/1skCk9.png)

再次重置密码：
````
mysql -u root
use mysql;
update user set password=password('123456') where user='root';
exit;

````
![](https://s2.ax1x.com/2020/02/05/1skm0e.png)

测试链接一下:
![](https://s2.ax1x.com/2020/02/05/1sknTH.png)

原因：mysql服务器 root 默认只允许 localhost 也就是 127.0.0.1 连接
登录mysql: `mysql -u root -p`
输入密码:直接回车即可  输入了会报错如下所示
![](https://s2.ax1x.com/2020/02/05/1skemD.png)

#### 解决连接报错
继续`mysql -u root -p`  回车  然后执行以下命令：
````
use mysql; 选择mysql库
select host from user where user='root';查看mysql库中的user表的host值（即可进行连接访问的主机/IP名称）
update user set host = '%' where user ='root'; 修改host值（以通配符%的内容增加主机/IP地址），当然也可以直接增加IP地址 %通配符表示所有ip都允许通过root账号链接
flush privileges; 刷新MySQL的系统权限相关表
select host from user where user='root'; 再重新查看user表时，有修改。。

````
#### 重连测试
然后这时候用客户端重连一下试试：ok啦
![](https://s2.ax1x.com/2020/02/05/1skKkd.png)

创建个数据库测试，对了 新建的数据打开自带了三个库  别手贱删哈，你表的创建执行都和这里面的表相关，不然你commit rollback 它怎么知道的，我之前本地安装mysql学习时手贱删过，后来发现数据再执行sql操作时就报错，找了各种办法最后重装才解决，所以不懂要么去研究要么不要动。
![](https://s2.ax1x.com/2020/02/05/1skVOO.png)
![](https://s2.ax1x.com/2020/02/05/1skMtA.png)



